{% extends 'accounts/dashboard_base.html' %}
{% load static %}

{% block dashboard_type %}Parceiro{% endblock %}

{% block header_gradient %}#007bff 0%, #6610f2 100%{% endblock %}

{% block stat_cards %}
<div class="col-md-4 mb-3">
    <div class="card stat-card text-center p-4">
        <div class="card-body">
            <i class="bi bi-people text-primary" style="font-size: 2.5rem;"></i>
            <h3 class="mt-3 mb-1">{{ total_clientes }}</h3>
            <p class="text-muted mb-0">Cliente{{ total_clientes|pluralize }} Vinculado{{ total_clientes|pluralize:",s" }}</p>
        </div>
    </div>
</div>
<div class="col-md-4 mb-3">
    <div class="card stat-card text-center p-4">
        <div class="card-body">
            <i class="bi bi-graph-up text-success" style="font-size: 2.5rem;"></i>
            <h3 class="mt-3 mb-1">R$ 0,00</h3>
            <p class="text-muted mb-0">Volume Total</p>
        </div>
    </div>
</div>
{% endblock %}

{% block empresa_title %}Sua Empresa (Parceiro){% endblock %}

{% block empresa_additional_info %}
{% if empresa_principal %}
<hr>
<div class="row mt-3">
    <div class="col-12">
        <p class="mb-2"><strong><i class="bi bi-diagram-3 me-1"></i> Consultoria:</strong></p>
        <div class="d-flex align-items-center">
            <div class="logo-container me-2">
                {% if empresa_principal.logomarca %}
                    <img src="{{ empresa_principal.logomarca.url }}" alt="{{ empresa_principal.razao_social }}" class="empresa-logo-small logo-card">
                {% else %}
                    <div class="logo-placeholder-small logo-card">
                        <i class="bi bi-building-fill text-primary" style="font-size: 0.6rem;"></i>
                    </div>
                {% endif %}
            </div>
            <div>
                {{ empresa_principal.nome_fantasia|default:empresa_principal.razao_social }}
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}





{% block content_middle %}
<!-- Lista de Clientes Vinculados -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">
                    <i class="bi bi-people me-2"></i>Seus Clientes
                </h5>
                <span class="badge bg-primary rounded-pill">{{ total_clientes }}</span>
            </div>
            <div class="card-body">
                {% if empresas_acessiveis %}
                <div class="row">
                    {% for empresa_cliente in empresas_acessiveis %}
                    <div class="col-md-6 col-lg-4 mb-3">
                        <div class="card border logo-card">
                            <div class="card-body text-center">
                                <div class="logo-container mx-auto mb-2">
                                    {% if empresa_cliente.logomarca %}
                                        <img src="{{ empresa_cliente.logomarca.url }}" alt="{{ empresa_cliente.razao_social }}" class="empresa-logo-small logo-card">
                                    {% else %}
                                        <div class="logo-placeholder-small logo-card">
                                            <i class="bi bi-building text-muted" style="font-size: 0.6rem;"></i>
                                        </div>
                                    {% endif %}
                                </div>
                                <h6 class="card-title">{{ empresa_cliente.nome_fantasia|default:empresa_cliente.razao_social }}</h6>
                                <p class="card-text small text-muted">{{ empresa_cliente.cnpj }}</p>
                                
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="text-center py-4">
                    <div class="mb-3">
                        <i class="bi bi-people text-muted" style="font-size: 3rem;"></i>
                    </div>
                    <h5>Nenhum cliente vinculado</h5>
                    <p class="text-muted mb-3">Você ainda não tem clientes vinculados à sua empresa.</p>
                    <a href="#" class="btn btn-primary">
                        <i class="bi bi-plus-circle me-1"></i>Adicionar Cliente
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block tipo_acesso_badge_class %}bg-primary{% endblock %}
